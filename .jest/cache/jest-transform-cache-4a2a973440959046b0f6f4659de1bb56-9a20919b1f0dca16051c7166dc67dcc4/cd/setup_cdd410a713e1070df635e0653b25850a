b193656845d920113a70fdaaf5633ba5
/**
 * Copyright (c) 2015-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */

'use strict';

jest.mock('setupDevtools').mock('npmlog');

// there's a __mock__ for it.


jest.mock('InitializeCore', () => {}).mock('Image', () => mockComponent('Image')).mock('Text', () => mockComponent('Text', MockNativeMethods)).mock('TextInput', () => mockComponent('TextInput')).mock('Modal', () => mockComponent('Modal')).mock('View', () => mockComponent('View', MockNativeMethods)).mock('RefreshControl', () => require.requireMock('RefreshControlMock')).mock('ScrollView', () => require.requireMock('ScrollViewMock')).mock('ActivityIndicator', () => mockComponent('ActivityIndicator')).mock('ListView', () => require.requireMock('ListViewMock')).mock('ListViewDataSource', () => {
  const DataSource = require.requireActual('ListViewDataSource');
  DataSource.prototype.toJSON = function () {
    function ListViewDataSource(dataBlob) {
      this.items = 0;
      // Ensure this doesn't throw.
      try {
        Object.keys(dataBlob).forEach(key => {
          this.items += dataBlob[key] && (dataBlob[key].length || dataBlob[key].size || 0);
        });
      } catch (e) {
        this.items = 'unknown';
      }
    }

    return new ListViewDataSource(this._dataBlob);
  };
  return DataSource;
}).mock('AnimatedImplementation', () => {
  const AnimatedImplementation = require.requireActual('AnimatedImplementation');
  const oldCreate = AnimatedImplementation.createAnimatedComponent;
  AnimatedImplementation.createAnimatedComponent = function (Component) {
    const Wrapped = oldCreate(Component);
    Wrapped.__skipSetNativeProps_FOR_TESTS_ONLY = true;
    return Wrapped;
  };
  return AnimatedImplementation;
}).mock('ReactNative', () => {
  const ReactNative = require.requireActual('ReactNative');
  const NativeMethodsMixin = ReactNative.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.NativeMethodsMixin;

  Object.assign(NativeMethodsMixin, MockNativeMethods);
  Object.assign(ReactNative.NativeComponent.prototype, MockNativeMethods);

  return ReactNative;
}).mock('ensureComponentIsNative', () => () => true);

const MockNativeMethods = require.requireActual('./MockNativeMethods');
const mockComponent = require.requireActual('./mockComponent');

require.requireActual('../Libraries/polyfills/babelHelpers.js');
require.requireActual('../Libraries/polyfills/Object.es7.js');
require.requireActual('../Libraries/polyfills/error-guard');

global.__DEV__ = true;

global.Promise = require.requireActual('promise');
global.regeneratorRuntime = require.requireActual('regenerator-runtime/runtime');

global.requestAnimationFrame = function (callback) {
  return setTimeout(callback, 0);
};
global.cancelAnimationFrame = function (id) {
  clearTimeout(id);
};jest.setMock('ErrorUtils', require('ErrorUtils'));const mockEmptyObject = {};
const mockNativeModules = {
  AlertManager: {
    alertWithArgs: jest.fn()
  },
  AppState: {
    addEventListener: jest.fn(),
    removeEventListener: jest.fn()
  },
  AsyncLocalStorage: {
    multiGet: jest.fn((keys, callback) => process.nextTick(() => callback(null, []))),
    multiSet: jest.fn((entries, callback) => process.nextTick(() => callback(null))),
    multiRemove: jest.fn((keys, callback) => process.nextTick(() => callback(null))),
    multiMerge: jest.fn((entries, callback) => process.nextTick(() => callback(null))),
    clear: jest.fn(callback => process.nextTick(() => callback(null))),
    getAllKeys: jest.fn(callback => process.nextTick(() => callback(null, [])))
  },
  BuildInfo: {
    appVersion: '0',
    buildVersion: '0'
  },
  Clipboard: {
    setString: jest.fn()
  },
  DataManager: {
    queryData: jest.fn()
  },
  DeviceInfo: {
    Dimensions: {
      window: {
        fontScale: 2,
        height: 1334,
        scale: 2,
        width: 750
      },
      screen: {
        fontScale: 2,
        height: 1334,
        scale: 2,
        width: 750
      }
    }
  },
  FacebookSDK: {
    login: jest.fn(),
    logout: jest.fn(),
    queryGraphPath: jest.fn((path, method, params, callback) => callback())
  },
  FbRelayNativeAdapter: {
    updateCLC: jest.fn()
  },
  GraphPhotoUpload: {
    upload: jest.fn()
  },
  I18n: {
    translationsDictionary: JSON.stringify({
      'Good bye, {name}!|Bye message': '\u{00A1}Adi\u{00F3}s {name}!'
    })
  },
  ImageLoader: {
    getSize: jest.fn(url => Promise.resolve({ width: 320, height: 240 })),
    prefetchImage: jest.fn()
  },
  ImageViewManager: {
    getSize: jest.fn((uri, success) => process.nextTick(() => success(320, 240))),
    prefetchImage: jest.fn()
  },
  KeyboardObserver: {
    addListener: jest.fn(),
    removeListeners: jest.fn()
  },
  Linking: {
    openURL: jest.fn(),
    canOpenURL: jest.fn(() => Promise.resolve(true)),
    addEventListener: jest.fn(),
    getInitialURL: jest.fn(() => Promise.resolve()),
    removeEventListener: jest.fn()
  },
  LocationObserver: {
    getCurrentPosition: jest.fn(),
    startObserving: jest.fn(),
    stopObserving: jest.fn()
  },
  ModalFullscreenViewManager: {},
  NetInfo: {
    fetch: jest.fn(() => Promise.resolve()),
    getConnectionInfo: jest.fn(() => Promise.resolve()),
    addEventListener: jest.fn(),
    removeEventListener: jest.fn(),
    isConnected: {
      fetch: jest.fn(() => Promise.resolve()),
      addEventListener: jest.fn(),
      removeEventListener: jest.fn()
    },
    isConnectionExpensive: jest.fn(() => Promise.resolve())
  },
  Networking: {
    sendRequest: jest.fn(),
    abortRequest: jest.fn(),
    addListener: jest.fn(),
    removeListeners: jest.fn()
  },
  PushNotificationManager: {
    presentLocalNotification: jest.fn(),
    scheduleLocalNotification: jest.fn(),
    cancelAllLocalNotifications: jest.fn(),
    removeAllDeliveredNotifications: jest.fn(),
    getDeliveredNotifications: jest.fn(callback => process.nextTick(() => [])),
    removeDeliveredNotifications: jest.fn(),
    setApplicationIconBadgeNumber: jest.fn(),
    getApplicationIconBadgeNumber: jest.fn(callback => process.nextTick(() => callback(0))),
    cancelLocalNotifications: jest.fn(),
    getScheduledLocalNotifications: jest.fn(callback => process.nextTick(() => callback())),
    requestPermissions: jest.fn(() => Promise.resolve({ alert: true, badge: true, sound: true })),
    abandonPermissions: jest.fn(),
    checkPermissions: jest.fn(callback => process.nextTick(() => callback({ alert: true, badge: true, sound: true }))),
    getInitialNotification: jest.fn(() => Promise.resolve(null)),
    addListener: jest.fn(),
    removeListeners: jest.fn()
  },
  SourceCode: {
    scriptURL: null
  },
  StatusBarManager: {
    HEIGHT: 42,
    setColor: jest.fn(),
    setStyle: jest.fn(),
    setHidden: jest.fn(),
    setNetworkActivityIndicatorVisible: jest.fn(),
    setBackgroundColor: jest.fn(),
    setTranslucent: jest.fn()
  },
  Timing: {
    createTimer: jest.fn(),
    deleteTimer: jest.fn()
  },
  UIManager: {
    AndroidViewPager: {
      Commands: {
        setPage: jest.fn(),
        setPageWithoutAnimation: jest.fn()
      }
    },
    blur: jest.fn(),
    createView: jest.fn(),
    dispatchViewManagerCommand: jest.fn(),
    focus: jest.fn(),
    setChildren: jest.fn(),
    manageChildren: jest.fn(),
    updateView: jest.fn(),
    removeSubviewsFromContainerWithID: jest.fn(),
    replaceExistingNonRootView: jest.fn(),
    customBubblingEventTypes: {},
    customDirectEventTypes: {},
    AndroidTextInput: {
      Commands: {}
    },
    ModalFullscreenView: {
      Constants: {}
    },
    ScrollView: {
      Constants: {}
    },
    View: {
      Constants: {}
    }
  },
  BlobModule: {
    BLOB_URI_SCHEME: 'content',
    BLOB_URI_HOST: null,
    addNetworkingHandler: jest.fn(),
    enableBlobSupport: jest.fn(),
    disableBlobSupport: jest.fn(),
    createFromParts: jest.fn(),
    sendBlob: jest.fn(),
    release: jest.fn()
  },
  WebSocketModule: {
    connect: jest.fn(),
    send: jest.fn(),
    sendBinary: jest.fn(),
    ping: jest.fn(),
    close: jest.fn(),
    addListener: jest.fn(),
    removeListeners: jest.fn()
  }
};

Object.keys(mockNativeModules).forEach(module => {
  try {
    jest.doMock(module, () => mockNativeModules[module]); // needed by FacebookSDK-test
  } catch (e) {
    jest.doMock(module, () => mockNativeModules[module], { virtual: true });
  }
});

jest.doMock('NativeModules', () => mockNativeModules);

jest.doMock('requireNativeComponent', () => {
  const React = require('react');

  return viewName => class extends React.Component {
    render() {
      return React.createElement(viewName, this.props, this.props.children);
    }
  };
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNldHVwLmpzIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwibW9ja0NvbXBvbmVudCIsIk1vY2tOYXRpdmVNZXRob2RzIiwicmVxdWlyZSIsInJlcXVpcmVNb2NrIiwiRGF0YVNvdXJjZSIsInJlcXVpcmVBY3R1YWwiLCJwcm90b3R5cGUiLCJ0b0pTT04iLCJMaXN0Vmlld0RhdGFTb3VyY2UiLCJkYXRhQmxvYiIsIml0ZW1zIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJsZW5ndGgiLCJzaXplIiwiZSIsIl9kYXRhQmxvYiIsIkFuaW1hdGVkSW1wbGVtZW50YXRpb24iLCJvbGRDcmVhdGUiLCJjcmVhdGVBbmltYXRlZENvbXBvbmVudCIsIkNvbXBvbmVudCIsIldyYXBwZWQiLCJfX3NraXBTZXROYXRpdmVQcm9wc19GT1JfVEVTVFNfT05MWSIsIlJlYWN0TmF0aXZlIiwiTmF0aXZlTWV0aG9kc01peGluIiwiX19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQiLCJhc3NpZ24iLCJOYXRpdmVDb21wb25lbnQiLCJnbG9iYWwiLCJfX0RFVl9fIiwiUHJvbWlzZSIsInJlZ2VuZXJhdG9yUnVudGltZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbGxiYWNrIiwic2V0VGltZW91dCIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwiaWQiLCJjbGVhclRpbWVvdXQiLCJzZXRNb2NrIiwibW9ja0VtcHR5T2JqZWN0IiwibW9ja05hdGl2ZU1vZHVsZXMiLCJBbGVydE1hbmFnZXIiLCJhbGVydFdpdGhBcmdzIiwiZm4iLCJBcHBTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiQXN5bmNMb2NhbFN0b3JhZ2UiLCJtdWx0aUdldCIsInByb2Nlc3MiLCJuZXh0VGljayIsIm11bHRpU2V0IiwiZW50cmllcyIsIm11bHRpUmVtb3ZlIiwibXVsdGlNZXJnZSIsImNsZWFyIiwiZ2V0QWxsS2V5cyIsIkJ1aWxkSW5mbyIsImFwcFZlcnNpb24iLCJidWlsZFZlcnNpb24iLCJDbGlwYm9hcmQiLCJzZXRTdHJpbmciLCJEYXRhTWFuYWdlciIsInF1ZXJ5RGF0YSIsIkRldmljZUluZm8iLCJEaW1lbnNpb25zIiwid2luZG93IiwiZm9udFNjYWxlIiwiaGVpZ2h0Iiwic2NhbGUiLCJ3aWR0aCIsInNjcmVlbiIsIkZhY2Vib29rU0RLIiwibG9naW4iLCJsb2dvdXQiLCJxdWVyeUdyYXBoUGF0aCIsInBhdGgiLCJtZXRob2QiLCJwYXJhbXMiLCJGYlJlbGF5TmF0aXZlQWRhcHRlciIsInVwZGF0ZUNMQyIsIkdyYXBoUGhvdG9VcGxvYWQiLCJ1cGxvYWQiLCJJMThuIiwidHJhbnNsYXRpb25zRGljdGlvbmFyeSIsIkpTT04iLCJzdHJpbmdpZnkiLCJJbWFnZUxvYWRlciIsImdldFNpemUiLCJ1cmwiLCJyZXNvbHZlIiwicHJlZmV0Y2hJbWFnZSIsIkltYWdlVmlld01hbmFnZXIiLCJ1cmkiLCJzdWNjZXNzIiwiS2V5Ym9hcmRPYnNlcnZlciIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXJzIiwiTGlua2luZyIsIm9wZW5VUkwiLCJjYW5PcGVuVVJMIiwiZ2V0SW5pdGlhbFVSTCIsIkxvY2F0aW9uT2JzZXJ2ZXIiLCJnZXRDdXJyZW50UG9zaXRpb24iLCJzdGFydE9ic2VydmluZyIsInN0b3BPYnNlcnZpbmciLCJNb2RhbEZ1bGxzY3JlZW5WaWV3TWFuYWdlciIsIk5ldEluZm8iLCJmZXRjaCIsImdldENvbm5lY3Rpb25JbmZvIiwiaXNDb25uZWN0ZWQiLCJpc0Nvbm5lY3Rpb25FeHBlbnNpdmUiLCJOZXR3b3JraW5nIiwic2VuZFJlcXVlc3QiLCJhYm9ydFJlcXVlc3QiLCJQdXNoTm90aWZpY2F0aW9uTWFuYWdlciIsInByZXNlbnRMb2NhbE5vdGlmaWNhdGlvbiIsInNjaGVkdWxlTG9jYWxOb3RpZmljYXRpb24iLCJjYW5jZWxBbGxMb2NhbE5vdGlmaWNhdGlvbnMiLCJyZW1vdmVBbGxEZWxpdmVyZWROb3RpZmljYXRpb25zIiwiZ2V0RGVsaXZlcmVkTm90aWZpY2F0aW9ucyIsInJlbW92ZURlbGl2ZXJlZE5vdGlmaWNhdGlvbnMiLCJzZXRBcHBsaWNhdGlvbkljb25CYWRnZU51bWJlciIsImdldEFwcGxpY2F0aW9uSWNvbkJhZGdlTnVtYmVyIiwiY2FuY2VsTG9jYWxOb3RpZmljYXRpb25zIiwiZ2V0U2NoZWR1bGVkTG9jYWxOb3RpZmljYXRpb25zIiwicmVxdWVzdFBlcm1pc3Npb25zIiwiYWxlcnQiLCJiYWRnZSIsInNvdW5kIiwiYWJhbmRvblBlcm1pc3Npb25zIiwiY2hlY2tQZXJtaXNzaW9ucyIsImdldEluaXRpYWxOb3RpZmljYXRpb24iLCJTb3VyY2VDb2RlIiwic2NyaXB0VVJMIiwiU3RhdHVzQmFyTWFuYWdlciIsIkhFSUdIVCIsInNldENvbG9yIiwic2V0U3R5bGUiLCJzZXRIaWRkZW4iLCJzZXROZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlIiwic2V0QmFja2dyb3VuZENvbG9yIiwic2V0VHJhbnNsdWNlbnQiLCJUaW1pbmciLCJjcmVhdGVUaW1lciIsImRlbGV0ZVRpbWVyIiwiVUlNYW5hZ2VyIiwiQW5kcm9pZFZpZXdQYWdlciIsIkNvbW1hbmRzIiwic2V0UGFnZSIsInNldFBhZ2VXaXRob3V0QW5pbWF0aW9uIiwiYmx1ciIsImNyZWF0ZVZpZXciLCJkaXNwYXRjaFZpZXdNYW5hZ2VyQ29tbWFuZCIsImZvY3VzIiwic2V0Q2hpbGRyZW4iLCJtYW5hZ2VDaGlsZHJlbiIsInVwZGF0ZVZpZXciLCJyZW1vdmVTdWJ2aWV3c0Zyb21Db250YWluZXJXaXRoSUQiLCJyZXBsYWNlRXhpc3RpbmdOb25Sb290VmlldyIsImN1c3RvbUJ1YmJsaW5nRXZlbnRUeXBlcyIsImN1c3RvbURpcmVjdEV2ZW50VHlwZXMiLCJBbmRyb2lkVGV4dElucHV0IiwiTW9kYWxGdWxsc2NyZWVuVmlldyIsIkNvbnN0YW50cyIsIlNjcm9sbFZpZXciLCJWaWV3IiwiQmxvYk1vZHVsZSIsIkJMT0JfVVJJX1NDSEVNRSIsIkJMT0JfVVJJX0hPU1QiLCJhZGROZXR3b3JraW5nSGFuZGxlciIsImVuYWJsZUJsb2JTdXBwb3J0IiwiZGlzYWJsZUJsb2JTdXBwb3J0IiwiY3JlYXRlRnJvbVBhcnRzIiwic2VuZEJsb2IiLCJyZWxlYXNlIiwiV2ViU29ja2V0TW9kdWxlIiwiY29ubmVjdCIsInNlbmQiLCJzZW5kQmluYXJ5IiwicGluZyIsImNsb3NlIiwibW9kdWxlIiwiZG9Nb2NrIiwidmlydHVhbCIsIlJlYWN0Iiwidmlld05hbWUiLCJyZW5kZXIiLCJjcmVhdGVFbGVtZW50IiwicHJvcHMiLCJjaGlsZHJlbiJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7OztBQVNBOztBQXVCQUEsS0FBS0MsSUFBTCxDQUFVLGVBQVYsRUFBMkJBLElBQTNCLENBQWdDLFFBQWhDOztBQUVBOzs7QUFHQUQsS0FDR0MsSUFESCxDQUNRLGdCQURSLEVBQzBCLE1BQU0sQ0FBRSxDQURsQyxFQUVHQSxJQUZILENBRVEsT0FGUixFQUVpQixNQUFNQyxjQUFjLE9BQWQsQ0FGdkIsRUFHR0QsSUFISCxDQUdRLE1BSFIsRUFHZ0IsTUFBTUMsY0FBYyxNQUFkLEVBQXNCQyxpQkFBdEIsQ0FIdEIsRUFJR0YsSUFKSCxDQUlRLFdBSlIsRUFJcUIsTUFBTUMsY0FBYyxXQUFkLENBSjNCLEVBS0dELElBTEgsQ0FLUSxPQUxSLEVBS2lCLE1BQU1DLGNBQWMsT0FBZCxDQUx2QixFQU1HRCxJQU5ILENBTVEsTUFOUixFQU1nQixNQUFNQyxjQUFjLE1BQWQsRUFBc0JDLGlCQUF0QixDQU50QixFQU9HRixJQVBILENBT1EsZ0JBUFIsRUFPMEIsTUFBTUcsUUFBUUMsV0FBUixDQUFvQixvQkFBcEIsQ0FQaEMsRUFRR0osSUFSSCxDQVFRLFlBUlIsRUFRc0IsTUFBTUcsUUFBUUMsV0FBUixDQUFvQixnQkFBcEIsQ0FSNUIsRUFTR0osSUFUSCxDQVNRLG1CQVRSLEVBUzZCLE1BQU1DLGNBQWMsbUJBQWQsQ0FUbkMsRUFVR0QsSUFWSCxDQVVRLFVB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a0JBQWtCOEksTUFBbEIsQ0FBMUIsRUFERSxDQUNvRDtBQUN2RCxHQUZELENBRUUsT0FBT3ZLLENBQVAsRUFBVTtBQUNWbkIsU0FBSzJMLE1BQUwsQ0FBWUQsTUFBWixFQUFvQixNQUFNOUksa0JBQWtCOEksTUFBbEIsQ0FBMUIsRUFBcUQsRUFBQ0UsU0FBUyxJQUFWLEVBQXJEO0FBQ0Q7QUFDRixDQU5EOztBQVFBNUwsS0FBSzJMLE1BQUwsQ0FBWSxlQUFaLEVBQTZCLE1BQU0vSSxpQkFBbkM7O0FBRUE1QyxLQUFLMkwsTUFBTCxDQUFZLHdCQUFaLEVBQXNDLE1BQU07QUFDMUMsUUFBTUUsUUFBUXpMLFFBQVEsT0FBUixDQUFkOztBQUVBLFNBQU8wTCxZQUNMLGNBQWNELE1BQU1ySyxTQUFwQixDQUE4QjtBQUM1QnVLLGFBQVM7QUFDUCxhQUFPRixNQUFNRyxhQUFOLENBQW9CRixRQUFwQixFQUE4QixLQUFLRyxLQUFuQyxFQUEwQyxLQUFLQSxLQUFMLENBQVdDLFFBQXJELENBQVA7QUFDRDtBQUgyQixHQURoQztBQU1ELENBVEQiLCJmaWxlIjoic2V0dXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IE1vY2tOYXRpdmVNZXRob2RzID0gcmVxdWlyZS5yZXF1aXJlQWN0dWFsKCcuL01vY2tOYXRpdmVNZXRob2RzJyk7XG5jb25zdCBtb2NrQ29tcG9uZW50ID0gcmVxdWlyZS5yZXF1aXJlQWN0dWFsKCcuL21vY2tDb21wb25lbnQnKTtcblxucmVxdWlyZS5yZXF1aXJlQWN0dWFsKCcuLi9MaWJyYXJpZXMvcG9seWZpbGxzL2JhYmVsSGVscGVycy5qcycpO1xucmVxdWlyZS5yZXF1aXJlQWN0dWFsKCcuLi9MaWJyYXJpZXMvcG9seWZpbGxzL09iamVjdC5lczcuanMnKTtcbnJlcXVpcmUucmVxdWlyZUFjdHVhbCgnLi4vTGlicmFyaWVzL3BvbHlmaWxscy9lcnJvci1ndWFyZCcpO1xuXG5nbG9iYWwuX19ERVZfXyA9IHRydWU7XG5cbmdsb2JhbC5Qcm9taXNlID0gcmVxdWlyZS5yZXF1aXJlQWN0dWFsKCdwcm9taXNlJyk7XG5nbG9iYWwucmVnZW5lcmF0b3JSdW50aW1lID0gcmVxdWlyZS5yZXF1aXJlQWN0dWFsKFxuICAncmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lJyxcbik7XG5cbmdsb2JhbC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICByZXR1cm4gc2V0VGltZW91dChjYWxsYmFjaywgMCk7XG59O1xuZ2xvYmFsLmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oaWQpIHtcbiAgY2xlYXJUaW1lb3V0KGlkKTtcbn07XG5cbmplc3QubW9jaygnc2V0dXBEZXZ0b29scycpLm1vY2soJ25wbWxvZycpO1xuXG4vLyB0aGVyZSdzIGEgX19tb2NrX18gZm9yIGl0LlxuamVzdC5zZXRNb2NrKCdFcnJvclV0aWxzJywgcmVxdWlyZSgnRXJyb3JVdGlscycpKTtcblxuamVzdFxuICAubW9jaygnSW5pdGlhbGl6ZUNvcmUnLCAoKSA9PiB7fSlcbiAgLm1vY2soJ0ltYWdlJywgKCkgPT4gbW9ja0NvbXBvbmVudCgnSW1hZ2UnKSlcbiAgLm1vY2soJ1RleHQnLCAoKSA9PiBtb2NrQ29tcG9uZW50KCdUZXh0JywgTW9ja05hdGl2ZU1ldGhvZHMpKVxuICAubW9jaygnVGV4dElucHV0JywgKCkgPT4gbW9ja0NvbXBvbmVudCgnVGV4dElucHV0JykpXG4gIC5tb2NrKCdNb2RhbCcsICgpID0+IG1vY2tDb21wb25lbnQoJ01vZGFsJykpXG4gIC5tb2NrKCdWaWV3JywgKCkgPT4gbW9ja0NvbXBvbmVudCgnVmlldycsIE1vY2tOYXRpdmVNZXRob2RzKSlcbiAgLm1vY2soJ1JlZnJlc2hDb250cm9sJywgKCkgPT4gcmVxdWlyZS5yZXF1aXJlTW9jaygnUmVmcmVzaENvbnRyb2xNb2NrJykpXG4gIC5tb2NrKCdTY3JvbGxWaWV3JywgKCkgPT4gcmVxdWlyZS5yZXF1aXJlTW9jaygnU2Nyb2xsVmlld01vY2snKSlcbiAgLm1vY2soJ0FjdGl2aXR5SW5kaWNhdG9yJywgKCkgPT4gbW9ja0NvbXBvbmVudCgnQWN0aXZpdHlJbmRpY2F0b3InKSlcbiAgLm1vY2soJ0xpc3RWaWV3JywgKCkgPT4gcmVxdWlyZS5yZXF1aXJlTW9jaygnTGlzdFZpZXdNb2NrJykpXG4gIC5tb2NrKCdMaXN0Vmlld0RhdGFTb3VyY2UnLCAoKSA9PiB7XG4gICAgY29uc3QgRGF0YVNvdXJjZSA9IHJlcXVpcmUucmVxdWlyZUFjdHVhbCgnTGlzdFZpZXdEYXRhU291cmNlJyk7XG4gICAgRGF0YVNvdXJjZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBMaXN0Vmlld0RhdGFTb3VyY2UoZGF0YUJsb2IpIHtcbiAgICAgICAgdGhpcy5pdGVtcyA9IDA7XG4gICAgICAgIC8vIEVuc3VyZSB0aGlzIGRvZXNuJ3QgdGhyb3cuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgT2JqZWN0LmtleXMoZGF0YUJsb2IpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXRlbXMgKz1cbiAgICAgICAgICAgICAgZGF0YUJsb2Jba2V5XSAmJlxuICAgICAgICAgICAgICAoZGF0YUJsb2Jba2V5XS5sZW5ndGggfHwgZGF0YUJsb2Jba2V5XS5zaXplIHx8IDApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgdGhpcy5pdGVtcyA9ICd1bmtub3duJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IExpc3RWaWV3RGF0YVNvdXJjZSh0aGlzLl9kYXRhQmxvYik7XG4gICAgfTtcbiAgICByZXR1cm4gRGF0YVNvdXJjZTtcbiAgfSlcbiAgLm1vY2soJ0FuaW1hdGVkSW1wbGVtZW50YXRpb24nLCAoKSA9PiB7XG4gICAgY29uc3QgQW5pbWF0ZWRJbXBsZW1lbnRhdGlvbiA9IHJlcXVpcmUucmVxdWlyZUFjdHVhbChcbiAgICAgICdBbmltYXRlZEltcGxlbWVudGF0aW9uJyxcbiAgICApO1xuICAgIGNvbnN0IG9sZENyZWF0ZSA9IEFuaW1hdGVkSW1wbGVtZW50YXRpb24uY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQ7XG4gICAgQW5pbWF0ZWRJbXBsZW1lbnRhdGlvbi5jcmVhdGVBbmltYXRlZENvbXBvbmVudCA9IGZ1bmN0aW9uKENvbXBvbmVudCkge1xuICAgICAgY29uc3QgV3JhcHBlZCA9IG9sZENyZWF0ZShDb21wb25lbnQpO1xuICAgICAgV3JhcHBlZC5fX3NraXBTZXROYXRpdmVQcm9wc19GT1JfVEVTVFNfT05MWSA9IHRydWU7XG4gICAgICByZXR1cm4gV3JhcHBlZDtcbiAgICB9O1xuICAgIHJldHVybiBBbmltYXRlZEltcGxlbWVudGF0aW9uO1xuICB9KVxuICAubW9jaygnUmVhY3ROYXRpdmUnLCAoKSA9PiB7XG4gICAgY29uc3QgUmVhY3ROYXRpdmUgPSByZXF1aXJlLnJlcXVpcmVBY3R1YWwoJ1JlYWN0TmF0aXZlJyk7XG4gICAgY29uc3QgTmF0aXZlTWV0aG9kc01peGluID1cbiAgICAgIFJlYWN0TmF0aXZlLl9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEXG4gICAgICAgIC5OYXRpdmVNZXRob2RzTWl4aW47XG5cbiAgICBPYmplY3QuYXNzaWduKE5hdGl2ZU1ldGhvZHNNaXhpbiwgTW9ja05hdGl2ZU1ldGhvZHMpO1xuICAgIE9iamVjdC5hc3NpZ24oUmVhY3ROYXRpdmUuTmF0aXZlQ29tcG9uZW50LnByb3RvdHlwZSwgTW9ja05hdGl2ZU1ldGhvZHMpO1xuXG4gICAgcmV0dXJuIFJlYWN0TmF0aXZlO1xuICB9KVxuICAubW9jaygnZW5zdXJlQ29tcG9uZW50SXNOYXRpdmUnLCAoKSA9PiAoKSA9PiB0cnVlKTtcblxuY29uc3QgbW9ja0VtcHR5T2JqZWN0ID0ge307XG5jb25zdCBtb2NrTmF0aXZlTW9kdWxlcyA9IHtcbiAgQWxlcnRNYW5hZ2VyOiB7XG4gICAgYWxlcnRXaXRoQXJnczogamVzdC5mbigpLFxuICB9LFxuICBBcHBTdGF0ZToge1xuICAgIGFkZEV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICByZW1vdmVFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gIH0sXG4gIEFzeW5jTG9jYWxTdG9yYWdlOiB7XG4gICAgbXVsdGlHZXQ6IGplc3QuZm4oKGtleXMsIGNhbGxiYWNrKSA9PlxuICAgICAgcHJvY2Vzcy5uZXh0VGljaygoKSA9PiBjYWxsYmFjayhudWxsLCBbXSkpLFxuICAgICksXG4gICAgbXVsdGlTZXQ6IGplc3QuZm4oKGVudHJpZXMsIGNhbGxiYWNrKSA9PlxuICAgICAgcHJvY2Vzcy5uZXh0VGljaygoKSA9PiBjYWxsYmFjayhudWxsKSksXG4gICAgKSxcbiAgICBtdWx0aVJlbW92ZTogamVzdC5mbigoa2V5cywgY2FsbGJhY2spID0+XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IGNhbGxiYWNrKG51bGwpKSxcbiAgICApLFxuICAgIG11bHRpTWVyZ2U6IGplc3QuZm4oKGVudHJpZXMsIGNhbGxiYWNrKSA9PlxuICAgICAgcHJvY2Vzcy5uZXh0VGljaygoKSA9PiBjYWxsYmFjayhudWxsKSksXG4gICAgKSxcbiAgICBjbGVhcjogamVzdC5mbihjYWxsYmFjayA9PiBwcm9jZXNzLm5leHRUaWNrKCgpID0+IGNhbGxiYWNrKG51bGwpKSksXG4gICAgZ2V0QWxsS2V5czogamVzdC5mbihjYWxsYmFjayA9PiBwcm9jZXNzLm5leHRUaWNrKCgpID0+IGNhbGxiYWNrKG51bGwsIFtdKSkpLFxuICB9LFxuICBCdWlsZEluZm86IHtcbiAgICBhcHBWZXJzaW9uOiAnMCcsXG4gICAgYnVpbGRWZXJzaW9uOiAnMCcsXG4gIH0sXG4gIENsaXBib2FyZDoge1xuICAgIHNldFN0cmluZzogamVzdC5mbigpLFxuICB9LFxuICBEYXRhTWFuYWdlcjoge1xuICAgIHF1ZXJ5RGF0YTogamVzdC5mbigpLFxuICB9LFxuICBEZXZpY2VJbmZvOiB7XG4gICAgRGltZW5zaW9uczoge1xuICAgICAgd2luZG93OiB7XG4gICAgICAgIGZvbnRTY2FsZTogMixcbiAgICAgICAgaGVpZ2h0OiAxMzM0LFxuICAgICAgICBzY2FsZTogMixcbiAgICAgICAgd2lkdGg6IDc1MCxcbiAgICAgIH0sXG4gICAgICBzY3JlZW46IHtcbiAgICAgICAgZm9udFNjYWxlOiAyLFxuICAgICAgICBoZWlnaHQ6IDEzMzQsXG4gICAgICAgIHNjYWxlOiAyLFxuICAgICAgICB3aWR0aDogNzUwLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICBGYWNlYm9va1NESzoge1xuICAgIGxvZ2luOiBqZXN0LmZuKCksXG4gICAgbG9nb3V0OiBqZXN0LmZuKCksXG4gICAgcXVlcnlHcmFwaFBhdGg6IGplc3QuZm4oKHBhdGgsIG1ldGhvZCwgcGFyYW1zLCBjYWxsYmFjaykgPT4gY2FsbGJhY2soKSksXG4gIH0sXG4gIEZiUmVsYXlOYXRpdmVBZGFwdGVyOiB7XG4gICAgdXBkYXRlQ0xDOiBqZXN0LmZuKCksXG4gIH0sXG4gIEdyYXBoUGhvdG9VcGxvYWQ6IHtcbiAgICB1cGxvYWQ6IGplc3QuZm4oKSxcbiAgfSxcbiAgSTE4bjoge1xuICAgIHRyYW5zbGF0aW9uc0RpY3Rpb25hcnk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICdHb29kIGJ5ZSwge25hbWV9IXxCeWUgbWVzc2FnZSc6ICdcXHV7MDBBMX1BZGlcXHV7MDBGM31zIHtuYW1lfSEnLFxuICAgIH0pLFxuICB9LFxuICBJbWFnZUxvYWRlcjoge1xuICAgIGdldFNpemU6IGplc3QuZm4odXJsID0+IFByb21pc2UucmVzb2x2ZSh7d2lkdGg6IDMyMCwgaGVpZ2h0OiAyNDB9KSksXG4gICAgcHJlZmV0Y2hJbWFnZTogamVzdC5mbigpLFxuICB9LFxuICBJbWFnZVZpZXdNYW5hZ2VyOiB7XG4gICAgZ2V0U2l6ZTogamVzdC5mbigodXJpLCBzdWNjZXNzKSA9PlxuICAgICAgcHJvY2Vzcy5uZXh0VGljaygoKSA9PiBzdWNjZXNzKDMyMCwgMjQwKSksXG4gICAgKSxcbiAgICBwcmVmZXRjaEltYWdlOiBqZXN0LmZuKCksXG4gIH0sXG4gIEtleWJvYXJkT2JzZXJ2ZXI6IHtcbiAgICBhZGRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIHJlbW92ZUxpc3RlbmVyczogamVzdC5mbigpLFxuICB9LFxuICBMaW5raW5nOiB7XG4gICAgb3BlblVSTDogamVzdC5mbigpLFxuICAgIGNhbk9wZW5VUkw6IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHRydWUpKSxcbiAgICBhZGRFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgZ2V0SW5pdGlhbFVSTDogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUoKSksXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICB9LFxuICBMb2NhdGlvbk9ic2VydmVyOiB7XG4gICAgZ2V0Q3VycmVudFBvc2l0aW9uOiBqZXN0LmZuKCksXG4gICAgc3RhcnRPYnNlcnZpbmc6IGplc3QuZm4oKSxcbiAgICBzdG9wT2JzZXJ2aW5nOiBqZXN0LmZuKCksXG4gIH0sXG4gIE1vZGFsRnVsbHNjcmVlblZpZXdNYW5hZ2VyOiB7fSxcbiAgTmV0SW5mbzoge1xuICAgIGZldGNoOiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKSxcbiAgICBnZXRDb25uZWN0aW9uSW5mbzogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUoKSksXG4gICAgYWRkRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICBpc0Nvbm5lY3RlZDoge1xuICAgICAgZmV0Y2g6IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCkpLFxuICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIH0sXG4gICAgaXNDb25uZWN0aW9uRXhwZW5zaXZlOiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKSxcbiAgfSxcbiAgTmV0d29ya2luZzoge1xuICAgIHNlbmRSZXF1ZXN0OiBqZXN0LmZuKCksXG4gICAgYWJvcnRSZXF1ZXN0OiBqZXN0LmZuKCksXG4gICAgYWRkTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICByZW1vdmVMaXN0ZW5lcnM6IGplc3QuZm4oKSxcbiAgfSxcbiAgUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXI6IHtcbiAgICBwcmVzZW50TG9jYWxOb3RpZmljYXRpb246IGplc3QuZm4oKSxcbiAgICBzY2hlZHVsZUxvY2FsTm90aWZpY2F0aW9uOiBqZXN0LmZuKCksXG4gICAgY2FuY2VsQWxsTG9jYWxOb3RpZmljYXRpb25zOiBqZXN0LmZuKCksXG4gICAgcmVtb3ZlQWxsRGVsaXZlcmVkTm90aWZpY2F0aW9uczogamVzdC5mbigpLFxuICAgIGdldERlbGl2ZXJlZE5vdGlmaWNhdGlvbnM6IGplc3QuZm4oY2FsbGJhY2sgPT4gcHJvY2Vzcy5uZXh0VGljaygoKSA9PiBbXSkpLFxuICAgIHJlbW92ZURlbGl2ZXJlZE5vdGlmaWNhdGlvbnM6IGplc3QuZm4oKSxcbiAgICBzZXRBcHBsaWNhdGlvbkljb25CYWRnZU51bWJlcjogamVzdC5mbigpLFxuICAgIGdldEFwcGxpY2F0aW9uSWNvbkJhZGdlTnVtYmVyOiBqZXN0LmZuKGNhbGxiYWNrID0+XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IGNhbGxiYWNrKDApKSxcbiAgICApLFxuICAgIGNhbmNlbExvY2FsTm90aWZpY2F0aW9uczogamVzdC5mbigpLFxuICAgIGdldFNjaGVkdWxlZExvY2FsTm90aWZpY2F0aW9uczogamVzdC5mbihjYWxsYmFjayA9PlxuICAgICAgcHJvY2Vzcy5uZXh0VGljaygoKSA9PiBjYWxsYmFjaygpKSxcbiAgICApLFxuICAgIHJlcXVlc3RQZXJtaXNzaW9uczogamVzdC5mbigoKSA9PlxuICAgICAgUHJvbWlzZS5yZXNvbHZlKHthbGVydDogdHJ1ZSwgYmFkZ2U6IHRydWUsIHNvdW5kOiB0cnVlfSksXG4gICAgKSxcbiAgICBhYmFuZG9uUGVybWlzc2lvbnM6IGplc3QuZm4oKSxcbiAgICBjaGVja1Blcm1pc3Npb25zOiBqZXN0LmZuKGNhbGxiYWNrID0+XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IGNhbGxiYWNrKHthbGVydDogdHJ1ZSwgYmFkZ2U6IHRydWUsIHNvdW5kOiB0cnVlfSkpLFxuICAgICksXG4gICAgZ2V0SW5pdGlhbE5vdGlmaWNhdGlvbjogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCkpLFxuICAgIGFkZExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgcmVtb3ZlTGlzdGVuZXJzOiBqZXN0LmZuKCksXG4gIH0sXG4gIFNvdXJjZUNvZGU6IHtcbiAgICBzY3JpcHRVUkw6IG51bGwsXG4gIH0sXG4gIFN0YXR1c0Jhck1hbmFnZXI6IHtcbiAgICBIRUlHSFQ6IDQyLFxuICAgIHNldENvbG9yOiBqZXN0LmZuKCksXG4gICAgc2V0U3R5bGU6IGplc3QuZm4oKSxcbiAgICBzZXRIaWRkZW46IGplc3QuZm4oKSxcbiAgICBzZXROZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlOiBqZXN0LmZuKCksXG4gICAgc2V0QmFja2dyb3VuZENvbG9yOiBqZXN0LmZuKCksXG4gICAgc2V0VHJhbnNsdWNlbnQ6IGplc3QuZm4oKSxcbiAgfSxcbiAgVGltaW5nOiB7XG4gICAgY3JlYXRlVGltZXI6IGplc3QuZm4oKSxcbiAgICBkZWxldGVUaW1lcjogamVzdC5mbigpLFxuICB9LFxuICBVSU1hbmFnZXI6IHtcbiAgICBBbmRyb2lkVmlld1BhZ2VyOiB7XG4gICAgICBDb21tYW5kczoge1xuICAgICAgICBzZXRQYWdlOiBqZXN0LmZuKCksXG4gICAgICAgIHNldFBhZ2VXaXRob3V0QW5pbWF0aW9uOiBqZXN0LmZuKCksXG4gICAgICB9LFxuICAgIH0sXG4gICAgYmx1cjogamVzdC5mbigpLFxuICAgIGNyZWF0ZVZpZXc6IGplc3QuZm4oKSxcbiAgICBkaXNwYXRjaFZpZXdNYW5hZ2VyQ29tbWFuZDogamVzdC5mbigpLFxuICAgIGZvY3VzOiBqZXN0LmZuKCksXG4gICAgc2V0Q2hpbGRyZW46IGplc3QuZm4oKSxcbiAgICBtYW5hZ2VDaGlsZHJlbjogamVzdC5mbigpLFxuICAgIHVwZGF0ZVZpZXc6IGplc3QuZm4oKSxcbiAgICByZW1vdmVTdWJ2aWV3c0Zyb21Db250YWluZXJXaXRoSUQ6IGplc3QuZm4oKSxcbiAgICByZXBsYWNlRXhpc3RpbmdOb25Sb290VmlldzogamVzdC5mbigpLFxuICAgIGN1c3RvbUJ1YmJsaW5nRXZlbnRUeXBlczoge30sXG4gICAgY3VzdG9tRGlyZWN0RXZlbnRUeXBlczoge30sXG4gICAgQW5kcm9pZFRleHRJbnB1dDoge1xuICAgICAgQ29tbWFuZHM6IHt9LFxuICAgIH0sXG4gICAgTW9kYWxGdWxsc2NyZWVuVmlldzoge1xuICAgICAgQ29uc3RhbnRzOiB7fSxcbiAgICB9LFxuICAgIFNjcm9sbFZpZXc6IHtcbiAgICAgIENvbnN0YW50czoge30sXG4gICAgfSxcbiAgICBWaWV3OiB7XG4gICAgICBDb25zdGFudHM6IHt9LFxuICAgIH0sXG4gIH0sXG4gIEJsb2JNb2R1bGU6IHtcbiAgICBCTE9CX1VSSV9TQ0hFTUU6ICdjb250ZW50JyxcbiAgICBCTE9CX1VSSV9IT1NUOiBudWxsLFxuICAgIGFkZE5ldHdvcmtpbmdIYW5kbGVyOiBqZXN0LmZuKCksXG4gICAgZW5hYmxlQmxvYlN1cHBvcnQ6IGplc3QuZm4oKSxcbiAgICBkaXNhYmxlQmxvYlN1cHBvcnQ6IGplc3QuZm4oKSxcbiAgICBjcmVhdGVGcm9tUGFydHM6IGplc3QuZm4oKSxcbiAgICBzZW5kQmxvYjogamVzdC5mbigpLFxuICAgIHJlbGVhc2U6IGplc3QuZm4oKSxcbiAgfSxcbiAgV2ViU29ja2V0TW9kdWxlOiB7XG4gICAgY29ubmVjdDogamVzdC5mbigpLFxuICAgIHNlbmQ6IGplc3QuZm4oKSxcbiAgICBzZW5kQmluYXJ5OiBqZXN0LmZuKCksXG4gICAgcGluZzogamVzdC5mbigpLFxuICAgIGNsb3NlOiBqZXN0LmZuKCksXG4gICAgYWRkTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICByZW1vdmVMaXN0ZW5lcnM6IGplc3QuZm4oKSxcbiAgfSxcbn07XG5cbk9iamVjdC5rZXlzKG1vY2tOYXRpdmVNb2R1bGVzKS5mb3JFYWNoKG1vZHVsZSA9PiB7XG4gIHRyeSB7XG4gICAgamVzdC5kb01vY2sobW9kdWxlLCAoKSA9PiBtb2NrTmF0aXZlTW9kdWxlc1ttb2R1bGVdKTsgLy8gbmVlZGVkIGJ5IEZhY2Vib29rU0RLLXRlc3RcbiAgfSBjYXRjaCAoZSkge1xuICAgIGplc3QuZG9Nb2NrKG1vZHVsZSwgKCkgPT4gbW9ja05hdGl2ZU1vZHVsZXNbbW9kdWxlXSwge3ZpcnR1YWw6IHRydWV9KTtcbiAgfVxufSk7XG5cbmplc3QuZG9Nb2NrKCdOYXRpdmVNb2R1bGVzJywgKCkgPT4gbW9ja05hdGl2ZU1vZHVsZXMpO1xuXG5qZXN0LmRvTW9jaygncmVxdWlyZU5hdGl2ZUNvbXBvbmVudCcsICgpID0+IHtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG4gIHJldHVybiB2aWV3TmFtZSA9PlxuICAgIGNsYXNzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQodmlld05hbWUsIHRoaXMucHJvcHMsIHRoaXMucHJvcHMuY2hpbGRyZW4pO1xuICAgICAgfVxuICAgIH07XG59KTtcbiJdfQ==